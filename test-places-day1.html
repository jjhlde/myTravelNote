<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day1 Places API Test</title>
    <script src="config.js"></script>
    <script src="places-api.js"></script>
</head>
<body>
    <h1>Day1 Places API í…ŒìŠ¤íŠ¸</h1>
    <div id="results"></div>
    
    <script>
        // day1.htmlì— ë‚˜ì˜¤ëŠ” ì£¼ìš” ì¥ì†Œë“¤
        const day1Places = [
            {
                name: 'Macau International Airport',
                coordinates: { lat: 22.1496, lng: 113.5919 }
            },
            {
                name: 'Andaz Macau Galaxy',
                coordinates: { lat: 22.1489, lng: 113.5543 }
            },
            {
                name: 'Broadway Food Street Macau',
                coordinates: { lat: 22.1472, lng: 113.5497 }
            },
            {
                name: 'Tim Ho Wan Broadway Macau',
                coordinates: { lat: 22.1472, lng: 113.5497 }
            },
            {
                name: 'Galaxy Hotel Diamond Lobby Macau',
                coordinates: { lat: 22.1489, lng: 113.5543 }
            },
            {
                name: 'Galaxy Promenade Shopping Mall',
                coordinates: { lat: 22.1489, lng: 113.5543 }
            },
            {
                name: 'JW Marriott Hotel Macau',
                coordinates: { lat: 22.1495, lng: 113.5580 }
            }
        ];

        let allPlaceData = {};

        async function testAllPlaces() {
            console.log('ğŸ”„ Places API í…ŒìŠ¤íŠ¸ ì‹œì‘...');
            const resultsDiv = document.getElementById('results');
            
            for (const place of day1Places) {
                try {
                    console.log(`ğŸ“ ê²€ìƒ‰ ì¤‘: ${place.name}`);
                    resultsDiv.innerHTML += `<p>ğŸ” ê²€ìƒ‰ ì¤‘: ${place.name}</p>`;
                    
                    const placeData = await placesService.findPlaceByName(place.name, place.coordinates);
                    allPlaceData[place.name] = placeData;
                    
                    resultsDiv.innerHTML += `
                        <div style="border: 1px solid #ccc; margin: 10px; padding: 10px;">
                            <h3>${placeData.name}</h3>
                            <p><strong>ì£¼ì†Œ:</strong> ${placeData.address}</p>
                            <p><strong>í‰ì :</strong> ${placeData.rating}/5 (${placeData.userRatingsTotal}ê°œ ë¦¬ë·°)</p>
                            <p><strong>ì‚¬ì§„:</strong> ${placeData.photos.length}ê°œ</p>
                            <p><strong>ë¦¬ë·°:</strong> ${placeData.reviews.length}ê°œ</p>
                            <p><strong>ìš´ì˜ì‹œê°„:</strong> ${placeData.openingHours.length > 0 ? placeData.openingHours[0] : 'ì •ë³´ ì—†ìŒ'}</p>
                            <p><strong>ì›¹ì‚¬ì´íŠ¸:</strong> ${placeData.website || 'ì •ë³´ ì—†ìŒ'}</p>
                            <p><strong>ì „í™”:</strong> ${placeData.phoneNumber || 'ì •ë³´ ì—†ìŒ'}</p>
                            <a href="${placeData.mapLink}" target="_blank">Google Mapsì—ì„œ ë³´ê¸°</a>
                        </div>
                    `;
                    
                    console.log(`âœ… ì™„ë£Œ: ${placeData.name}`);
                    
                    // API ìš”ì²­ ì œí•œì„ ìœ„í•œ ë”œë ˆì´
                    await new Promise(resolve => setTimeout(resolve, 500));
                    
                } catch (error) {
                    console.error(`âŒ ì˜¤ë¥˜: ${place.name}`, error);
                    resultsDiv.innerHTML += `<p style="color: red;">âŒ ì˜¤ë¥˜: ${place.name} - ${error.message}</p>`;
                }
            }
            
            // ê²°ê³¼ë¥¼ JSONìœ¼ë¡œ ì¶œë ¥
            console.log('ğŸ“Š ëª¨ë“  ì¥ì†Œ ë°ì´í„°:', allPlaceData);
            resultsDiv.innerHTML += `
                <div style="background: #f0f0f0; padding: 20px; margin-top: 20px;">
                    <h3>JSON ë°ì´í„° (ì½˜ì†”ì—ì„œë„ í™•ì¸ ê°€ëŠ¥)</h3>
                    <pre>${JSON.stringify(allPlaceData, null, 2)}</pre>
                </div>
            `;
        }

        // í˜ì´ì§€ ë¡œë“œ í›„ í…ŒìŠ¤íŠ¸ ì‹œì‘
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                if (window.placesService) {
                    testAllPlaces();
                } else {
                    document.getElementById('results').innerHTML = 'âŒ Places Serviceê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. config.jsì™€ places-api.jsë¥¼ í™•ì¸í•˜ì„¸ìš”.';
                }
            }, 1000);
        });
    </script>
</body>
</html>