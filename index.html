<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>마카오 가족여행 🇲🇴</title>
    
    <!-- PWA 메타 태그 -->
    <meta name="theme-color" content="#4F46E5">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="마카오 가족여행">
    
    <!-- 아이콘 -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🇲🇴</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🇲🇴</text></svg>">
    
    <!-- 매니페스트 -->
    <link rel="manifest" href="./manifest.json">
    
    <!-- CSS 파일 -->
    <link rel="stylesheet" href="./macau.css">
</head>
<body>
    <div class="container">
        <!-- PWA 설치 가이드 팝업 -->
        <div class="install-guide-overlay" id="installGuideOverlay">
            <div class="install-guide-popup">
                <button class="close-btn" id="closeGuideBtn">✕</button>
                
                <div class="install-guide-header">
                    <div class="install-guide-icon">📱</div>
                    <div class="install-guide-title">앱으로 설치하세요!</div>
                    <div class="install-guide-subtitle">
                        마카오 여행계획을 언제든<br>
                        빠르게 확인할 수 있어요
                    </div>
                </div>

                <div class="install-steps">
                    <div class="install-step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <div class="step-text">하단 공유 버튼 터치 <span class="step-icon">⬆️</span></div>
                        </div>
                    </div>
                    <div class="install-step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <div class="step-text">"홈 화면에 추가" 선택 <span class="step-icon">➕</span></div>
                        </div>
                    </div>
                    <div class="install-step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <div class="step-text">오른쪽 상단 "추가" 터치 <span class="step-icon">✅</span></div>
                        </div>
                    </div>
                </div>

                <div class="install-benefit">
                    <div class="benefit-title">🌟 앱 설치 혜택</div>
                    <div class="benefit-list">
                        ✓ 마카오에서 오프라인 사용<br>
                        ✓ 빠른 접속 (3초 → 1초)<br>
                        ✓ 홈 화면에서 바로 실행
                    </div>
                </div>

                <div class="install-buttons">
                    <button class="btn-primary" id="installNowBtn">지금 설치하기</button>
                    <button class="btn-secondary" id="skipInstallBtn">나중에</button>
                </div>
            </div>
        </div>
        
        <div class="header">
            <div class="header-content">
                <div class="header-main">
                    <h1>🇲🇴 마카오 가족여행</h1>
                    <p>37개월 딸과 함께하는 특별한 여행</p>
                </div>
                <div class="header-utils">
                    <button class="util-btn" id="budgetBtn" title="예산 관리">💰</button>
                    <div class="utility-hub">
                        <button class="util-hub-btn" id="utilityHubBtn" title="여행 도구">🛠️</button>
                        <div class="utility-menu" id="utilityMenu">
                            <button class="utility-item" id="exchangeRateBtn" data-tool="exchange">
                                <span class="utility-icon">💱</span>
                                <span class="utility-label">환율</span>
                            </button>
                            <button class="utility-item" id="weatherBtn" data-tool="weather">
                                <span class="utility-icon">🌦️</span>
                                <span class="utility-label">날씨</span>
                            </button>
                            <button class="utility-item" id="timeBtn" data-tool="time">
                                <span class="utility-icon">⏰</span>
                                <span class="utility-label">시차</span>
                            </button>
                            <button class="utility-item" id="translateBtn" data-tool="translate">
                                <span class="utility-icon">🗣️</span>
                                <span class="utility-label">번역</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="day-tabs">
                <div class="day-tab active" data-page="0">📋 정보</div>
                <div class="day-tab" data-page="1">1일차</div>
                <div class="day-tab" data-page="2">2일차</div>
                <div class="day-tab" data-page="3">3일차</div>
                <div class="day-tab" data-page="4">4일차</div>
                <div class="day-tab" data-page="5">📝 준비물</div>
            </div>
        </div>

        <div class="pages-container">
            <div class="pages-wrapper" id="pagesWrapper">
                <!-- 페이지 콘텐츠는 동적으로 로드됩니다 -->
                <div class="page" id="page-0">
                    <div class="loading">페이지 로딩 중...</div>
                </div>
                <div class="page" id="page-1">
                    <div class="loading">페이지 로딩 중...</div>
                </div>
                <div class="page" id="page-2">
                    <div class="loading">페이지 로딩 중...</div>
                </div>
                <div class="page" id="page-3">
                    <div class="loading">페이지 로딩 중...</div>
                </div>
                <div class="page" id="page-4">
                    <div class="loading">페이지 로딩 중...</div>
                </div>
                <div class="page" id="page-5">
                    <div class="loading">페이지 로딩 중...</div>
                </div>
            </div>
        </div>

        <!-- 페이지 인디케이터 -->
        <div class="page-indicator">
            <div class="indicator-dot active" data-page="0"></div>
            <div class="indicator-dot" data-page="1"></div>
            <div class="indicator-dot" data-page="2"></div>
            <div class="indicator-dot" data-page="3"></div>
            <div class="indicator-dot" data-page="4"></div>
            <div class="indicator-dot" data-page="5"></div>
        </div>

        <!-- 스와이프 가이드 -->
        <div class="swipe-hint" id="swipeHint">👈 좌우로 스와이프해서 날짜 이동 👉</div>
    </div>

    <!-- 이미지 팝업 모달 -->
    <div class="image-popup-overlay" id="imagePopupOverlay">
        <div class="image-popup-content">
            <img id="popupImage" class="image-popup-img" src="" alt="">
            <button class="image-popup-close" id="popupClose">✕</button>
            <div class="image-popup-info">
                <div class="image-popup-title" id="popupTitle">여행 사진</div>
                <div class="image-popup-description" id="popupDescription">클릭하거나 ESC 키를 눌러 닫기</div>
            </div>
        </div>
    </div>

    <!-- 환율 계산기 팝업 -->
    <div class="exchange-popup-overlay" id="exchangePopupOverlay">
        <div class="exchange-popup-content">
            <div class="exchange-popup-header">
                <h3>💱 환율 계산기</h3>
                <button class="exchange-popup-close" id="exchangePopupClose">✕</button>
            </div>
            
            <div class="exchange-rate-info">
                <div class="rate-display">
                    <span class="rate-text" id="currentRate">환율 로딩 중...</span>
                    <span class="rate-date" id="rateDate">한국수출입은행 제공</span>
                </div>
            </div>

            <div class="exchange-calculator">
                <div class="exchange-input-group">
                    <label for="mopInput">마카오 파타카 (MOP)</label>
                    <div class="input-wrapper">
                        <input type="number" id="mopInput" placeholder="0" step="0.01" min="0">
                        <span class="currency-label">MOP</span>
                    </div>
                </div>

                <div class="exchange-arrow">⇩</div>

                <div class="exchange-input-group">
                    <label for="krwOutput">한국 원 (KRW)</label>
                    <div class="input-wrapper">
                        <input type="text" id="krwOutput" placeholder="0" readonly>
                        <span class="currency-label">원</span>
                    </div>
                </div>
            </div>

            <div class="exchange-shortcuts">
                <button class="shortcut-btn" data-amount="100">100 MOP</button>
                <button class="shortcut-btn" data-amount="500">500 MOP</button>
                <button class="shortcut-btn" data-amount="1000">1,000 MOP</button>
                <button class="shortcut-btn" data-amount="5000">5,000 MOP</button>
            </div>

            <div class="exchange-tips">
                <div class="tips-title">💡 환율 팁</div>
                <div class="tips-content">
                    • 마카오 대부분 상점에서 홍콩달러(HKD)도 사용 가능<br>
                    • 카지노에서는 HKD가 더 선호됨<br>
                    • 현금 환전보다 카드 결제가 환율상 유리
                </div>
            </div>
        </div>
    </div>

    <!-- 예산 관리 팝업 -->
    <div class="budget-popup-overlay" id="budgetPopupOverlay">
        <div class="budget-popup-content">
            <div class="budget-popup-header">
                <h3>💰 예산 관리</h3>
                <button class="budget-popup-close" id="budgetPopupClose">✕</button>
            </div>

            <!-- 예산 현황 -->
            <div class="budget-status" id="budgetStatus">
                <div class="budget-total">
                    <span class="budget-label">총 예산</span>
                    <span class="budget-amount" id="totalBudget">설정되지 않음</span>
                </div>
                <div class="budget-remaining">
                    <span class="budget-label">남은 예산</span>
                    <span class="budget-amount" id="remainingBudget">-</span>
                </div>
                <div class="budget-daily">
                    <span class="budget-label">일일 권장</span>
                    <span class="budget-amount" id="dailyBudget">-</span>
                </div>
            </div>

            <!-- 예산 설정 -->
            <div class="budget-setup" id="budgetSetup">
                <div class="budget-input-group">
                    <label>총 여행 예산 (원)</label>
                    <input type="number" id="budgetInput" placeholder="1000000" min="0">
                </div>
                <div class="budget-dates">
                    <div class="date-input-group">
                        <label>여행 시작일</label>
                        <input type="date" id="startDateInput">
                    </div>
                    <div class="date-input-group">
                        <label>여행 종료일</label>
                        <input type="date" id="endDateInput">
                    </div>
                </div>
                <button class="btn-primary" id="setBudgetBtn">예산 설정</button>
            </div>

            <!-- 지출 입력 -->
            <div class="expense-input" id="expenseInput" style="display: none;">
                <!-- 카테고리 선택 -->
                <div class="category-selection">
                    <label>지출 카테고리</label>
                    <div class="category-grid" id="categoryGrid">
                        <button class="category-btn" data-category="food" data-icon="🍽️">
                            <span class="category-icon">🍽️</span>
                            <span class="category-text">식사</span>
                        </button>
                        <button class="category-btn" data-category="transport" data-icon="🚗">
                            <span class="category-icon">🚗</span>
                            <span class="category-text">교통</span>
                        </button>
                        <button class="category-btn" data-category="shopping" data-icon="🛍️">
                            <span class="category-icon">🛍️</span>
                            <span class="category-text">쇼핑</span>
                        </button>
                        <button class="category-btn" data-category="attraction" data-icon="🎡">
                            <span class="category-icon">🎡</span>
                            <span class="category-text">관광</span>
                        </button>
                        <button class="category-btn" data-category="accommodation" data-icon="🏨">
                            <span class="category-icon">🏨</span>
                            <span class="category-text">숙박</span>
                        </button>
                        <button class="category-btn" data-category="other" data-icon="💳">
                            <span class="category-icon">💳</span>
                            <span class="category-text">기타</span>
                        </button>
                    </div>
                </div>

                <!-- 지출 입력 폼 -->
                <div class="expense-form" id="expenseForm" style="display: none;">
                    <div class="selected-category" id="selectedCategory">
                        <span class="selected-icon" id="selectedIcon">🍽️</span>
                        <span class="selected-text" id="selectedText">식사</span>
                    </div>
                    
                    <div class="expense-inputs">
                        <div class="expense-amount-input">
                            <input type="number" id="expenseAmount" placeholder="지출 금액" min="0" step="1000">
                            <span class="currency-unit">원</span>
                        </div>
                        <div class="expense-memo-input">
                            <input type="text" id="expenseMemo" placeholder="메모 (선택사항)" maxlength="50">
                        </div>
                    </div>

                    <div class="expense-buttons">
                        <button class="btn-secondary" id="cancelExpenseBtn">취소</button>
                        <button class="btn-primary" id="addExpenseBtn">추가</button>
                    </div>
                </div>

                <!-- 오늘 지출 내역 -->
                <div class="today-expenses">
                    <div class="expenses-header">
                        <h4>오늘 지출 내역</h4>
                        <div class="today-total" id="todayTotal">0원</div>
                    </div>
                    <div class="expenses-list" id="expensesList">
                        <div class="no-expenses">아직 지출 내역이 없습니다</div>
                    </div>
                </div>

                <!-- 카테고리별 통계 -->
                <div class="expense-summary" id="expenseSummary" style="display: none;">
                    <h4>카테고리별 지출</h4>
                    <div class="summary-chart" id="summaryChart"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript 파일 -->
    <script src="./config.js"></script>
    <script src="./places-api.js"></script>
    <script src="./enhance-places.js"></script>
    <script src="./macau.js"></script>
</body>
</html>