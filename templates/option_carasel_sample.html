<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ÎèÑÏøÑ Í≤åÏûÑÏáº 2025 Ïó¨Ìñâ</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', 'Noto Sans KR', sans-serif;
        }
        .gradient-text {
            background-image: linear-gradient(45deg, #F57C00, #FFB74D);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        .page-container {
            display: flex;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .page-content {
            flex-shrink: 0;
            width: 100%;
        }
        .nav-tab.active {
            color: #F57C00;
            font-weight: 700;
            border-color: #F57C00;
        }
        .slider-arrow {
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .image-slider-container:hover .slider-arrow {
            opacity: 1;
        }

        /* --- ÌôïÏû•Ìòï Ïπ¥ÎìúÎ•º ÏúÑÌïú ÏÉàÎ°úÏö¥ Ïä§ÌÉÄÏùº --- */
        .expandable-options {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .expandable-options.expanded {
            max-height: 500px; /* Ï∂©Î∂ÑÌïú ÎÜíÏù¥ */
        }
        .option-item {
            transition: background-color 0.2s ease-in-out;
        }
        .option-item.selected {
            background-color: #fff7ed; /* bg-orange-50 */
            border-color: #fb923c; /* border-orange-400 */
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div class="container mx-auto max-w-lg min-h-screen bg-white shadow-2xl shadow-slate-200 flex flex-col relative overflow-hidden">
        
        <!-- ÏÉÅÎã® Ìó§Îçî (Í≥†Ï†ï) -->
        <header id="main-header" class="sticky top-0 z-20 bg-white/95 backdrop-blur-lg border-b border-slate-100">
            <div class="p-6">
                <h1 id="main-title" class="text-xl font-bold text-slate-900 truncate"></h1>
                <p id="main-subtitle" class="text-sm text-slate-500 truncate"></p>
            </div>
            <!-- Ïä§ÌÅ¨Î°§Ìòï ÌÉ≠ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
            <div id="top-nav" class="px-4 border-t border-slate-100">
                <div class="flex items-center gap-4 overflow-x-auto no-scrollbar">
                    <!-- Day Tabs will be generated by JS -->
                </div>
            </div>
        </header>

        <!-- Î©îÏù∏ ÏΩòÌÖêÏ∏† ÏòÅÏó≠ (Ïä§ÏôÄÏù¥ÌîÑ Í∞ÄÎä•) -->
        <main class="flex-1 overflow-hidden">
            <div id="page-container" class="page-container h-full">
                <!-- Day Pages will be generated by JS -->
            </div>
        </main>
    </div>

    <script>
        // ÏÇ¨Ïö©ÏûêÍ∞Ä Ï†úÍ≥µÌïú mock_resp.json Îç∞Ïù¥ÌÑ∞Î•º Ïó¨Í∏∞Ïóê Î∂ôÏó¨ÎÑ£ÏäµÎãàÎã§.
        const travelData = { "responseType": "final", "status": "success", "version": "1.0", "generatedAt": "2025-07-21T14:28:03Z", "tripPlan": { "tripInfo": { "destination": "ÎèÑÏøÑ", "tripTitle": "ÎèÑÏøÑ Í≤åÏûÑÏáº 2025 ÏôÑÏ†Ñ Ï†ïÎ≥µ ÏÜîÎ°ú Ïó¨Ìñâ", "startDate": "2025-09-25", "endDate": "2025-09-27", "totalDays": 3, "flightInfo": { "outbound": { "date": "2025-09-25", "time": "09:00", "airline": "ÎåÄÌïúÌï≠Í≥µ" }, "return": { "date": "2025-09-27", "time": "18:30", "airline": "ÎåÄÌïúÌï≠Í≥µ" } }, "travelers": { "adults": 1, "children": 0, "childrenAges": [] }, "tripTheme": [ "Í≤åÏûÑ", "Ï†ÑÏãúÌöå", "ÏÜîÎ°úÏó¨Ìñâ", "ÏÑ±ÏßÄÏàúÎ°Ä" ], "estimatedBudget": { "currency": "KRW", "total": 1200000, "perPerson": 1200000 } }, "dailyTips": [ { "type": "tgs", "icon": "üéÆ", "content": "ÎèÑÏøÑ Í≤åÏûÑÏáº(TGS) ÌåÅ", "details": [ "9/25(Î™©)-26(Í∏à)ÏùÄ ÎπÑÏ¶àÎãàÏä§ Îç∞Ïù¥, 9/27(ÌÜ†)-28(Ïùº)ÏùÄ ÌçºÎ∏îÎ¶≠ Îç∞Ïù¥ÏûÖÎãàÎã§. ÏùºÏ†ïÏóê ÎßûÏ∂∞ Ìã∞ÏºìÏùÑ ÎØ∏Î¶¨ ÏòàÎß§ÌïòÏÑ∏Ïöî.", "Ïù∏Í∏∞ Í≤åÏûÑ ÏãúÏó∞ÏùÄ ÎåÄÍ∏∞ ÏãúÍ∞ÑÏù¥ Îß§Ïö∞ Í∏∏ Ïàò ÏûàÏúºÎãà, Í∞ÄÏû• Í¥ÄÏã¨ ÏûàÎäî Î∂ÄÏä§Î∂ÄÌÑ∞ Í≥µÎûµÌïòÎäî Í≤ÉÏù¥ Ï¢ãÏäµÎãàÎã§.", "ÌñâÏÇ¨Ïû•ÏùÄ Îß§Ïö∞ ÎÑìÍ≥† ÌòºÏû°ÌïòÎØÄÎ°ú Ìé∏Ìïú Ïã†Î∞úÏùÄ ÌïÑÏàòÏûÖÎãàÎã§.", "Ïä§ÎßàÌä∏Ìè∞, Ìú¥ÎåÄÏö© Í≤åÏûÑÍ∏∞ Îì±ÏùÑ ÏúÑÌïú Î≥¥Ï°∞Î∞∞ÌÑ∞Î¶¨Î•º Íº≠ Ï±ôÍ∏∞ÏÑ∏Ïöî." ], "spots": [ { "name": "ÎßàÏø†ÌïòÎ¶¨ Î©ßÏÑ∏", "placeQuery": "Makuhari Messe, Chiba", "placeDetail": {}, "tip": "ÎèÑÏøÑ Í≤åÏûÑÏáº Í≥µÏãù Í∞úÏµú Ïû•ÏÜåÏûÖÎãàÎã§. Ïπ¥Ïù¥ÌûåÎßàÏø†ÌïòÎ¶¨ Ïó≠ÏóêÏÑú ÎèÑÎ≥¥ 5~10Î∂Ñ Í±∞Î¶¨ÏûÖÎãàÎã§.", "placeDetails": { "name": "ÎßàÏø†ÌïòÎ¶¨ Î©ßÏÑ∏", "address": "2-ch≈çme-1 Nakase, Mihama Ward, Chiba, 261-8550 ÏùºÎ≥∏", "rating": 3.9, "reviewCount": 25376, "photos": [ "https://placehold.co/600x300/667eea/ffffff?text=Makuhari+Messe+1" ], "mapLink": "https://maps.google.com/?cid=14898119344862873056", "placeId": "ChIJ378u1R-CImAR4EXtS5zAwM4" } } ] } ], "itinerary": [ { "dayNumber": 1, "date": "2025-09-25", "dayOfWeek": "Î™©", "dayTheme": "ÎÇòÎ¶¨ÌÉÄ ÎèÑÏ∞© Î∞è Í≤åÏù¥Î®∏Ïùò ÏÑ±ÏßÄ 'ÏïÑÌÇ§ÌïòÎ∞îÎùº' ÌÉêÎ∞©", "dayNote": "Ïò§Ï†Ñ ÎπÑÌñâÍ∏∞Î°ú ÎèÑÏ∞© ÌõÑ, Ïò§ÌõÑÏóêÎäî ÎèÑÏøÑ Í≤åÏûÑÏáºÏùò ÏòàÏó¥ Í≤©ÏúºÎ°ú ÏïÑÌÇ§ÌïòÎ∞îÎùºÎ•º ÎëòÎü¨Î≥¥Îäî ÏùºÏ†ïÏûÖÎãàÎã§.", "activities": [ { "timeSlot": { "start": "09:00", "end": "11:30" }, "activityType": "transport", "activityName": "Ïù∏Ï≤úÏóêÏÑú ÎèÑÏøÑ(ÎÇòÎ¶¨ÌÉÄ)Î°ú Ïù¥Îèô" }, { "timeSlot": { "start": "13:00", "end": "14:00" }, "activityType": "attraction", "activityName": "Ìò∏ÌÖî Ï≤¥ÌÅ¨Ïù∏ Î∞è Ïßê Î≥¥Í¥Ä", "mainLocation": { "name": "APA Ìò∏ÌÖî & Î¶¨Ï°∞Ìä∏ ÎèÑÏøÑ Î≤†Ïù¥ ÎßàÏø†ÌïòÎ¶¨", "placeDetails": { "name": "APA Ìò∏ÌÖî & Î¶¨Ï°∞Ìä∏ ÎèÑÏøÑ Î≤†Ïù¥ ÎßàÏø†ÌïòÎ¶¨", "address": "2-ch≈çme-3 Hibino, Mihama Ward, Chiba, 261-0021 ÏùºÎ≥∏", "rating": 4, "reviewCount": 17690, "photos": [ "https://placehold.co/600x300/e9d5ff/581c87?text=APA+Hotel" ], "mapLink": "https://maps.google.com/?cid=18053748279231973069" } } }, { "timeSlot": { "start": "14:00", "end": "15:30" }, "activityType": "meal", "mealType": "lunch", "activityName": "Ï†êÏã¨ ÏãùÏÇ¨", "options": [ { "name": "Ïπ¥Ïù¥ÌûåÎßàÏø†ÌïòÎ¶¨ Ïó≠ Ï£ºÎ≥Ä ÏãùÎãπÍ∞Ä", "recommended": true, "reasonForSelection": "ÏïÑÌÇ§ÌïòÎ∞îÎùºÎ°ú Ïù¥Îèô Ï†Ñ, Ïó≠ Í∑ºÏ≤òÏóêÏÑú Í∞ÑÌé∏ÌïòÍ≤å Ìï¥Í≤∞", "tips": [ "ÎùºÎ©ò, ÎçÆÎ∞• Îì± Îπ†Î•∏ ÏãùÏÇ¨Í∞Ä Í∞ÄÎä•Ìïú Í≥≥Ïù¥ ÎßéÏäµÎãàÎã§." ], "placeDetails": { "name": "Midtree Cafe", "address": "ÏùºÎ≥∏ „Äí261-0021 Chiba, Mihama Ward, Hibino, 2-ch≈çme‚àíÔºî „Éó„É¨„ÉäÂπïÂºµ 2F", "rating": 3.9, "reviewCount": 321, "photos": [ "https://placehold.co/600x300/fecaca/991b1b?text=Midtree+Cafe" ], "mapLink": "https://maps.google.com/?cid=5761559363357931999" } } ] }, { "timeSlot": { "start": "15:30", "end": "19:30" }, "activityType": "attraction", "activityName": "ÏïÑÌÇ§ÌïòÎ∞îÎùº 'Ï†ÑÍ∏∞Ë°ó' ÌÉêÎ∞©", "options": [ { "name": "ÏöîÎèÑÎ∞îÏãú Ïπ¥Î©îÎùº", "tips": [ "ÏµúÏã† Ï†ÑÏûêÏ†úÌíà, Í≤åÏûÑ, ÌîºÍ∑úÏñ¥ Îì±ÏùÑ Ìïú Í≥≥ÏóêÏÑú Î≥º Ïàò ÏûàÎäî ÎåÄÌòï Îß§Ïû•ÏûÖÎãàÎã§." ], "placeDetails": { "name": "ÏöîÎèÑÎ∞îÏãú Ïπ¥Î©îÎùº Î©ÄÌã∞ÎØ∏ÎîîÏñ¥ Akiba", "address": "1-1 Kanda Hanaokach≈ç, Chiyoda City, Tokyo 101-0028 ÏùºÎ≥∏", "rating": 4.2, "reviewCount": 25012, "photos": [ "https://placehold.co/600x300/a5f3fc/0c4a6e?text=Yodobashi+1", "https://placehold.co/600x300/99f6e4/0f766e?text=Yodobashi+2" ], "mapLink": "https://maps.google.com/?cid=8915183078415758198" } }, { "name": "ÏïÑÌÇ§ÌïòÎ∞îÎùº ÎùºÎîîÏò§ÌöåÍ¥Ä", "recommended": true, "tips": [ "ÌîºÍ∑úÏñ¥, ÍµøÏ¶à Îì± ÏÑúÎ∏åÏª¨Ï≤ò ÏÉÅÌíà Ï†ÑÎ¨∏ Îß§Ïû•Ïù¥ Î∞ÄÏßëÌï¥ ÏûàÏäµÎãàÎã§." ], "placeDetails": { "name": "ÏïÑÌÇ§ÌïòÎ∞îÎùº ÎùºÎîîÏò§ÌöåÍ¥Ä", "address": "1-ch≈çme-15-16 Sotokanda, Chiyoda City, Tokyo 101-0021 ÏùºÎ≥∏", "rating": 4.2, "reviewCount": 6951, "photos": [ "https://placehold.co/600x300/d8b4fe/581c87?text=Radio+Kaikan" ], "mapLink": "https://maps.google.com/?cid=3516513028144054760" } }, { "name": "ÏäàÌçº Ìè¨ÌÖåÌÜ†", "tips": [ "Í≥†Ï†Ñ Í≤åÏûÑ(Î†àÌä∏Î°ú Í≤åÏûÑ)Ïùò ÏÑ±ÏßÄÎ°ú, Ï∂îÏñµÏùò Í≤åÏûÑÎì§ÏùÑ Íµ¨Í≤ΩÌïòÍ≥† Íµ¨Îß§Ìï† Ïàò ÏûàÏäµÎãàÎã§." ], "placeDetails": { "name": "ÏäàÌçº Ìè¨ÌÖåÏù¥ÌÜ† ÏïÑÌÇ§ÌïòÎ∞îÎùº Ï†ê", "address": "ÏùºÎ≥∏ „Äí101-0021 Tokyo, Chiyoda City, Sotokanda, 1-ch≈çme‚àí11‚àíÔºí ÂåóÊûó„Éì„É´ ÔºìÈöéÔΩûÔºïÈöé", "rating": 4.3, "reviewCount": 3517, "photos": [ "https://placehold.co/600x300/fde68a/854d0e?text=Super+Potato" ], "mapLink": "https://maps.google.com/?cid=7617596130752392823" } } ] }, { "timeSlot": { "start": "19:30", "end": "20:30" }, "activityType": "meal", "mealType": "dinner", "activityName": "Ï†ÄÎÖÅ ÏãùÏÇ¨ (ÏïÑÌÇ§ÌïòÎ∞îÎùº)", "options": [ { "name": "ÌÅêÏäà Ïû•Í∞ÄÎùº ÎùºÎ©ò", "recommended": true, "reasonForSelection": "Îã§ÏñëÌïú ÌÜ†ÌïëÏùÑ Ï∂îÍ∞ÄÌï† Ïàò ÏûàÎäî Ïú†Î™Ö ÎèàÏΩîÏ∏† ÎùºÎ©ò Ï†ÑÎ¨∏Ï†ê. ÌòºÎ∞•ÌïòÍ∏∞ Ï¢ãÏäµÎãàÎã§.", "placeDetails": { "name": "ÌÅêÏäà Ïû•Í∞ÄÎùº ÎùºÎ©ò ÏïÑÌÇ§ÌïòÎ∞îÎùºÏ†ê", "address": "ÏùºÎ≥∏ „Äí101-0021 Tokyo, Chiyoda City, Sotokanda, 3-ch≈çme‚àí11‚àíÔºñ ‰∏ÄÊûù„Éì„É´ ÔºëÔº¶", "rating": 4.4, "reviewCount": 4044, "photos": [ "https://placehold.co/600x300/fdba74/9a3411?text=Ramen" ], "mapLink": "https://maps.google.com/?cid=15803054051893721784" } }, { "name": "Í∑úÏπ¥Ï∏† Ïù¥ÏπòÎãàÏÇ∞", "reasonForSelection": "Î†àÏñ¥ ÏÉÅÌÉúÎ°ú ÎÇòÏôÄ Í∞úÏù∏ ÌôîÎ°úÏóê Íµ¨Ïõå Î®πÎäî Í∑úÏπ¥Ï∏† ÎßõÏßëÏûÖÎãàÎã§.", "placeDetails": { "name": "Í∑úÏπ¥Ï∏† Ïù¥ÏπòÎãàÏÇ∞", "address": "3-ch≈çme-8-17 Sotokanda, Chiyoda City, Tokyo 101-0021 ÏùºÎ≥∏", "rating": 4.8, "reviewCount": 12781, "photos": [ "https://placehold.co/600x300/fca5a5/991b1b?text=Gyukatsu" ], "mapLink": "https://maps.google.com/?cid=4605856578078533612" } } ] } ] }, { "dayNumber": 2, "date": "2025-09-26", "dayOfWeek": "Í∏à", "dayTheme": "ÎèÑÏøÑ Í≤åÏûÑÏáº(TGS) ÏßëÏ§ë Í≥µÎûµ!", "activities": [ { "timeSlot": { "start": "10:00", "end": "17:00" }, "activityType": "attraction", "activityName": "ÎèÑÏøÑ Í≤åÏûÑÏáº 2025 Í¥ÄÎûå" } ] }, { "dayNumber": 3, "date": "2025-09-27", "dayOfWeek": "ÌÜ†", "dayTheme": "TGS ÌçºÎ∏îÎ¶≠ Îç∞Ïù¥ & Í∑ÄÍµ≠", "activities": [ { "timeSlot": { "start": "10:00", "end": "13:30" }, "activityType": "shopping", "activityName": "TGS Í¥ÄÎûå Î∞è ÍµøÏ¶à ÏáºÌïë" } ] } ] } };

        document.addEventListener('DOMContentLoaded', () => {
            const navContainer = document.querySelector('#top-nav .flex');
            const pageContainer = document.getElementById('page-container');
            let currentPageIndex = 0;

            function renderApp() {
                const tripInfo = travelData.tripPlan.tripInfo;
                document.getElementById('main-title').textContent = `üéÆ ${tripInfo.tripTitle}`;
                document.getElementById('main-subtitle').textContent = `${tripInfo.startDate} ~ ${tripInfo.endDate} (${tripInfo.totalDays}Ïùº)`;
                
                pageContainer.innerHTML = '';
                navContainer.innerHTML = '';

                // Ïû•ÏÜå ÏÉÅÏÑ∏ Ï†ïÎ≥¥ HTML ÏÉùÏÑ± Ìó¨Ìçº Ìï®Ïàò
                const createDetailsHtml = (item) => {
                    if (!item) return '<p class="text-sm text-slate-500">ÏÑ∏Î∂Ä Ï†ïÎ≥¥Í∞Ä ÏóÜÏäµÎãàÎã§.</p>';

                    if (!item.placeDetails) {
                        const description = item.description || item.reasonForSelection || 'ÏûêÏÑ∏Ìïú ÏÑ§Î™ÖÏù¥ ÏóÜÏäµÎãàÎã§.';
                        const tipsHtml = item.tips && item.tips.length > 0 ? `<div class="mt-4 border-t border-slate-100 pt-3"><h4 class="text-xs font-bold text-slate-500 mb-2">üí° Ï†ÑÎ¨∏Í∞Ä ÌåÅ</h4><ul class="list-disc list-inside text-xs text-slate-500 space-y-1">${item.tips.map(tip => `<li>${tip}</li>`).join('')}</ul></div>` : '';
                        return `<div class="p-1">${description}</div>${tipsHtml}`;
                    }
                    
                    const details = item.placeDetails;
                    const imagesHtml = details.photos && details.photos.length > 0 ? `
                        <div class="relative -mx-5 mb-4 rounded-lg overflow-hidden image-slider-container">
                            <div class="flex overflow-x-auto snap-x snap-mandatory no-scrollbar image-list">
                                ${details.photos.map(src => `<div class="snap-center flex-shrink-0 w-full"><img src="${src}" class="w-full h-52 object-cover" alt="${details.name}" onerror="this.onerror=null;this.src='https://placehold.co/600x300/cbd5e1/475569?text=Image+Error';"></div>`).join('')}
                            </div>
                            <div class="absolute bottom-3 left-0 right-0 flex justify-center gap-2 slider-dots"></div>
                            <button class="slider-arrow absolute top-1/2 left-2 -translate-y-1/2 bg-black/30 text-white w-8 h-8 rounded-full flex items-center justify-center prev-btn">&lt;</button>
                            <button class="slider-arrow absolute top-1/2 right-2 -translate-y-1/2 bg-black/30 text-white w-8 h-8 rounded-full flex items-center justify-center next-btn">&gt;</button>
                        </div>` : '';
                    const ratingHtml = details.rating ? `
                        <div class="flex items-center gap-2">
                            <span class="font-bold text-amber-500">${details.rating}</span>
                            <div class="flex text-amber-400">${'‚òÖ'.repeat(Math.round(details.rating))}${'‚òÜ'.repeat(5 - Math.round(details.rating))}</div>
                            <span class="text-xs text-slate-400">(${details.reviewCount.toLocaleString()} reviews)</span>
                        </div>` : '';
                    const tipsHtml = item.tips && item.tips.length > 0 ? `<div class="mt-4 border-t border-slate-100 pt-3"><h4 class="text-xs font-bold text-slate-500 mb-2">üí° Ï†ÑÎ¨∏Í∞Ä ÌåÅ</h4><ul class="list-disc list-inside text-xs text-slate-500 space-y-1">${item.tips.map(tip => `<li>${tip}</li>`).join('')}</ul></div>` : '';

                    return `
                        ${imagesHtml}
                        <div class="space-y-3 pt-2">
                            ${ratingHtml}
                            <div class="flex items-start gap-2 text-sm text-slate-600">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0 mt-0.5"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                                <span>${details.address || 'Ï£ºÏÜå Ï†ïÎ≥¥ ÏóÜÏùå'}</span>
                            </div>
                            ${ item.reasonForSelection ? `<p class="text-sm font-medium text-orange-700 bg-orange-50 p-3 rounded-lg mt-2">${item.reasonForSelection}</p>` : ''}
                            <div class="mt-4 flex gap-3">
                                <a href="${details.mapLink}" target="_blank" class="flex-1 text-center bg-orange-50 text-orange-700 text-sm font-bold py-2 px-4 rounded-lg hover:bg-orange-100 transition">ÏßÄÎèÑ Î≥¥Í∏∞</a>
                            </div>
                            ${tipsHtml}
                        </div>`;
                };

                // Í∞Å ÎÇ†ÏßúÎ≥ÑÎ°ú ÌéòÏù¥ÏßÄ ÏÉùÏÑ±
                travelData.tripPlan.itinerary.forEach((dayPlan, dayIndex) => {
                    const activityIcons = { transport: { icon: `‚úàÔ∏è`, color: 'bg-blue-100' }, attraction: { icon: `üè∞`, color: 'bg-purple-100' }, meal: { icon: `üçú`, color: 'bg-amber-100' }, shopping: { icon: `üõçÔ∏è`, color: 'bg-pink-100' }, rest: { icon: `üò¥`, color: 'bg-teal-100' } };

                    // Í∞Å ÌôúÎèôÎ≥Ñ Ïπ¥Îìú ÏÉùÏÑ±
                    let activitiesHtml = dayPlan.activities.map((act, actIndex) => {
                        const iconInfo = activityIcons[act.activityType] || { icon: '‚û°Ô∏è', color: 'bg-slate-100' };
                        
                        // ÏòµÏÖòÏù¥ ÏûàÎäî Í≤ΩÏö∞ (ÌôïÏû•Ìòï Ïπ¥Îìú)
                        if (act.options && act.options.length > 1) {
                            let recommendedIndex = act.options.findIndex(opt => opt.recommended);
                            if (recommendedIndex === -1) recommendedIndex = 0;

                            const initialContentHtml = createDetailsHtml(act.options[recommendedIndex]);

                            const compactOptionsHtml = act.options.map((option, index) => {
                                const rating = option.placeDetails?.rating;
                                const ratingHtml = rating ? `<div class="flex items-center gap-1.5"><span class="font-bold text-amber-500 text-sm">${rating}</span><div class="flex text-amber-400">${'‚òÖ'.repeat(Math.round(rating))}</div></div>` : '';
                                return `
                                <div class="option-item p-4 border rounded-lg cursor-pointer ${index === recommendedIndex ? 'selected' : ''}" data-index="${index}">
                                    <div class="flex justify-between items-start">
                                        <h4 class="font-bold text-slate-800 pr-4">${option.recommended ? '‚≠ê ' : ''}${option.name}</h4>
                                        ${ratingHtml}
                                    </div>
                                    <p class="text-xs text-slate-500 mt-1">${option.tips?.[0] || option.reasonForSelection || ''}</p>
                                </div>
                                `
                            }).join('');

                            return `
                                <div class="relative pl-12 activity-card" data-day-index="${dayIndex}" data-activity-index="${actIndex}">
                                    <div class="absolute left-0 top-1.5 flex items-center"><div class="w-8 h-8 ${iconInfo.color} rounded-full flex items-center justify-center ring-4 ring-white">${iconInfo.icon}</div></div>
                                    <div class="bg-white p-5 rounded-xl border border-slate-100 shadow-sm">
                                        <p class="text-sm font-semibold text-gray-500 mb-1">${act.timeSlot.start} - ${act.timeSlot.end}</p>
                                        <h3 class="text-lg font-bold mb-3">${act.activityName}</h3>
                                        
                                        <!-- ÌòÑÏû¨ ÏÑ†ÌÉùÎêú ÏòµÏÖòÏùò ÏÉÅÏÑ∏ Ï†ïÎ≥¥ -->
                                        <div class="option-details-container">
                                            ${initialContentHtml}
                                        </div>

                                        <!-- Îã§Î•∏ ÏòµÏÖò Î≥¥Í∏∞ Î≤ÑÌäº -->
                                        <div class="mt-4 pt-4 border-t border-slate-100">
                                            <button class="toggle-options-btn text-sm font-bold text-orange-600 hover:text-orange-700 w-full text-left flex items-center justify-between">
                                                <span>Îã§Î•∏ Ï∂îÏ≤ú Î≥¥Í∏∞ (${act.options.length - 1}Í∞ú)</span>
                                                <svg class="w-4 h-4 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                                            </button>
                                        </div>

                                        <!-- ÌôïÏû•Îê† Îã§Î•∏ ÏòµÏÖò Î™©Î°ù -->
                                        <div class="expandable-options mt-3">
                                            <div class="space-y-3">
                                                ${compactOptionsHtml}
                                            </div>
                                        </div>
                                    </div>
                                </div>`;
                        } else {
                            // ÏòµÏÖòÏù¥ ÏóÜÍ±∞ÎÇò 1Í∞úÏù∏ Í≤ΩÏö∞ (Í∏∞Î≥∏ Ïπ¥Îìú)
                             const singleOption = (act.options && act.options.length === 1) ? act.options[0] : (act.mainLocation || act);
                            return `
                                <div class="relative pl-12">
                                    <div class="absolute left-0 top-1.5 flex items-center"><div class="w-8 h-8 ${iconInfo.color} rounded-full flex items-center justify-center ring-4 ring-white">${iconInfo.icon}</div></div>
                                    <div class="bg-white p-5 rounded-xl border border-slate-100 shadow-sm">
                                        <p class="text-sm font-semibold text-gray-500 mb-1">${act.timeSlot.start} - ${act.timeSlot.end}</p>
                                        <h3 class="text-lg font-bold mb-3">${act.activityName}</h3>
                                        ${createDetailsHtml(singleOption)}
                                    </div>
                                </div>`;
                        }
                    }).join('');
                    
                    const pageDiv = document.createElement('div');
                    pageDiv.className = 'page-content h-full overflow-y-auto p-6';
                    pageDiv.innerHTML = `<div class="mb-8"><h2 class="text-3xl font-extrabold gradient-text">DAY ${dayPlan.dayNumber}</h2><p class="text-slate-500 font-medium">${dayPlan.dayTheme}</p></div><div class="relative"><div class="absolute left-4 top-2 bottom-2 w-0.5 bg-slate-200"></div><div class="space-y-8">${activitiesHtml}</div></div>`;
                    pageContainer.appendChild(pageDiv);

                    const navTab = document.createElement('button');
                    navTab.className = 'nav-tab py-4 px-2 text-sm font-medium text-slate-500 border-b-2 border-transparent whitespace-nowrap';
                    navTab.textContent = `DAY ${dayPlan.dayNumber}`;
                    navTab.dataset.index = dayIndex;
                    navContainer.appendChild(navTab);
                });
                
                // Ïù¥Î≤§Ìä∏ ÏúÑÏûÑÏùÑ ÏÇ¨Ïö©ÌïòÏó¨ ÌÅ¥Î¶≠ Ìï∏Îì§Îü¨ ÏÑ§Ï†ï
                pageContainer.addEventListener('click', (e) => {
                    // 'Îã§Î•∏ ÏòµÏÖò Î≥¥Í∏∞' Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú
                    const toggleBtn = e.target.closest('.toggle-options-btn');
                    if (toggleBtn) {
                        const expandableArea = toggleBtn.parentElement.nextElementSibling;
                        const icon = toggleBtn.querySelector('svg');
                        expandableArea.classList.toggle('expanded');
                        icon.classList.toggle('rotate-180');
                    }

                    // ÏòµÏÖò ÏïÑÏù¥ÌÖú ÌÅ¥Î¶≠ Ïãú
                    const optionItem = e.target.closest('.option-item');
                    if (optionItem) {
                        const card = optionItem.closest('.activity-card');
                        const dayIndex = card.dataset.dayIndex;
                        const activityIndex = card.dataset.activityIndex;
                        const optionIndex = optionItem.dataset.index;

                        // ÏÑ†ÌÉùÎêú ÏïÑÏù¥ÌÖú ÌôúÏÑ±Ìôî
                        card.querySelectorAll('.option-item').forEach(c => c.classList.remove('selected'));
                        optionItem.classList.add('selected');

                        // ÏÉÅÏÑ∏ Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
                        const selectedOptionData = travelData.tripPlan.itinerary[dayIndex].activities[activityIndex].options[optionIndex];
                        const detailsContainer = card.querySelector('.option-details-container');
                        detailsContainer.innerHTML = createDetailsHtml(selectedOptionData);
                        
                        // Ïù¥ÎØ∏ÏßÄ Ïä¨ÎùºÏù¥Îçî Ïû¨Ï¥àÍ∏∞Ìôî
                        initializeSliders();
                    }
                });
            }

            // ÌéòÏù¥ÏßÄ Ï†ÑÌôò Î°úÏßÅ
            const switchPage = (index) => {
                const navTabs = navContainer.querySelectorAll('.nav-tab');
                currentPageIndex = index;
                pageContainer.style.transform = `translateX(-${index * 100}%)`;
                navTabs.forEach((tab, i) => tab.classList.toggle('active', i === index));
                const activeTab = navTabs[index];
                if (activeTab) {
                    activeTab.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
                }
                initializeSliders();
            };
            navContainer.addEventListener('click', (e) => { if (e.target.classList.contains('nav-tab')) { switchPage(parseInt(e.target.dataset.index)); } });
            
            // ÌÑ∞Ïπò Ïä§ÏôÄÏù¥ÌîÑ Î°úÏßÅ
            let touchStartX = 0;
            pageContainer.addEventListener('touchstart', (e) => { touchStartX = e.changedTouches[0].screenX; }, { passive: true });
            pageContainer.addEventListener('touchend', (e) => {
                const touchEndX = e.changedTouches[0].screenX;
                const navTabs = navContainer.querySelectorAll('.nav-tab');
                if (touchEndX < touchStartX - 50 && currentPageIndex < navTabs.length - 1) { switchPage(currentPageIndex + 1); }
                if (touchEndX > touchStartX + 50 && currentPageIndex > 0) { switchPage(currentPageIndex - 1); }
            });

            // Ïù¥ÎØ∏ÏßÄ Ïä¨ÎùºÏù¥Îçî Ï¥àÍ∏∞Ìôî Î°úÏßÅ
            const initializeSliders = () => {
                document.querySelectorAll('.image-slider-container').forEach(sliderContainer => {
                    const imageList = sliderContainer.querySelector('.image-list');
                    const prevBtn = sliderContainer.querySelector('.prev-btn');
                    const nextBtn = sliderContainer.querySelector('.next-btn');
                    const dotsContainer = sliderContainer.querySelector('.slider-dots');
                    const images = imageList.querySelectorAll('div.snap-center');
                    
                    if (!imageList || !prevBtn || !nextBtn || !dotsContainer) return;
                    if (images.length <= 1) {
                        dotsContainer.style.display = 'none';
                        prevBtn.style.display = 'none';
                        nextBtn.style.display = 'none';
                        return;
                    }
                    
                    dotsContainer.style.display = 'flex';
                    prevBtn.style.display = 'flex';
                    nextBtn.style.display = 'flex';

                    let currentIndex = 0;
                    dotsContainer.innerHTML = '';
                    images.forEach((_, i) => { const dot = document.createElement('button'); dot.classList.add('w-2', 'h-2', 'rounded-full', 'transition', 'bg-white/50'); if (i === 0) dot.classList.add('bg-white'); dotsContainer.appendChild(dot); });
                    const dots = dotsContainer.querySelectorAll('button');
                    
                    const updateSlider = (smooth = true) => { 
                        imageList.scrollTo({ left: imageList.offsetWidth * currentIndex, behavior: smooth ? 'smooth' : 'auto' }); 
                        dots.forEach((dot, i) => {
                            dot.classList.toggle('bg-white', i === currentIndex);
                            dot.classList.toggle('bg-white/50', i !== currentIndex);
                        }); 
                    };

                    prevBtn.onclick = () => { currentIndex = (currentIndex > 0) ? currentIndex - 1 : images.length - 1; updateSlider(); };
                    nextBtn.onclick = () => { currentIndex = (currentIndex < images.length - 1) ? currentIndex + 1 : 0; updateSlider(); };
                    
                    let scrollTimeout;
                    imageList.onscroll = () => {
                        clearTimeout(scrollTimeout);
                        scrollTimeout = setTimeout(() => {
                            const newIndex = Math.round(imageList.scrollLeft / imageList.offsetWidth); 
                            if(newIndex !== currentIndex) { 
                                currentIndex = newIndex; 
                                updateSlider(false); 
                            }
                        }, 150);
                    };
                    updateSlider(false);
                });
            };
            
            renderApp();
            switchPage(0);
        });
    </script>
</body>
</html>