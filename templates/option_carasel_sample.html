<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>도쿄 게임쇼 2025 여행</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', 'Noto Sans KR', sans-serif;
        }
        .gradient-text {
            background-image: linear-gradient(45deg, #F57C00, #FFB74D);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        .page-container {
            display: flex;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .page-content {
            flex-shrink: 0;
            width: 100%;
        }
        .nav-tab.active {
            color: #F57C00;
            font-weight: 700;
            border-color: #F57C00;
        }
        .slider-arrow {
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .image-slider-container:hover .slider-arrow {
            opacity: 1;
        }

        /* --- 확장형 카드를 위한 새로운 스타일 --- */
        .expandable-options {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .expandable-options.expanded {
            max-height: 500px; /* 충분한 높이 */
        }
        .option-item {
            transition: background-color 0.2s ease-in-out;
        }
        .option-item.selected {
            background-color: #fff7ed; /* bg-orange-50 */
            border-color: #fb923c; /* border-orange-400 */
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div class="container mx-auto max-w-lg min-h-screen bg-white shadow-2xl shadow-slate-200 flex flex-col relative overflow-hidden">
        
        <!-- 상단 헤더 (고정) -->
        <header id="main-header" class="sticky top-0 z-20 bg-white/95 backdrop-blur-lg border-b border-slate-100">
            <div class="p-6">
                <h1 id="main-title" class="text-xl font-bold text-slate-900 truncate"></h1>
                <p id="main-subtitle" class="text-sm text-slate-500 truncate"></p>
            </div>
            <!-- 스크롤형 탭 네비게이션 -->
            <div id="top-nav" class="px-4 border-t border-slate-100">
                <div class="flex items-center gap-4 overflow-x-auto no-scrollbar">
                    <!-- Day Tabs will be generated by JS -->
                </div>
            </div>
        </header>

        <!-- 메인 콘텐츠 영역 (스와이프 가능) -->
        <main class="flex-1 overflow-hidden">
            <div id="page-container" class="page-container h-full">
                <!-- Day Pages will be generated by JS -->
            </div>
        </main>
    </div>

    <script>
        // 사용자가 제공한 mock_resp.json 데이터를 여기에 붙여넣습니다.
        const travelData = { "responseType": "final", "status": "success", "version": "1.0", "generatedAt": "2025-07-21T14:28:03Z", "tripPlan": { "tripInfo": { "destination": "도쿄", "tripTitle": "도쿄 게임쇼 2025 완전 정복 솔로 여행", "startDate": "2025-09-25", "endDate": "2025-09-27", "totalDays": 3, "flightInfo": { "outbound": { "date": "2025-09-25", "time": "09:00", "airline": "대한항공" }, "return": { "date": "2025-09-27", "time": "18:30", "airline": "대한항공" } }, "travelers": { "adults": 1, "children": 0, "childrenAges": [] }, "tripTheme": [ "게임", "전시회", "솔로여행", "성지순례" ], "estimatedBudget": { "currency": "KRW", "total": 1200000, "perPerson": 1200000 } }, "dailyTips": [ { "type": "tgs", "icon": "🎮", "content": "도쿄 게임쇼(TGS) 팁", "details": [ "9/25(목)-26(금)은 비즈니스 데이, 9/27(토)-28(일)은 퍼블릭 데이입니다. 일정에 맞춰 티켓을 미리 예매하세요.", "인기 게임 시연은 대기 시간이 매우 길 수 있으니, 가장 관심 있는 부스부터 공략하는 것이 좋습니다.", "행사장은 매우 넓고 혼잡하므로 편한 신발은 필수입니다.", "스마트폰, 휴대용 게임기 등을 위한 보조배터리를 꼭 챙기세요." ], "spots": [ { "name": "마쿠하리 멧세", "placeQuery": "Makuhari Messe, Chiba", "placeDetail": {}, "tip": "도쿄 게임쇼 공식 개최 장소입니다. 카이힌마쿠하리 역에서 도보 5~10분 거리입니다.", "placeDetails": { "name": "마쿠하리 멧세", "address": "2-chōme-1 Nakase, Mihama Ward, Chiba, 261-8550 일본", "rating": 3.9, "reviewCount": 25376, "photos": [ "https://placehold.co/600x300/667eea/ffffff?text=Makuhari+Messe+1" ], "mapLink": "https://maps.google.com/?cid=14898119344862873056", "placeId": "ChIJ378u1R-CImAR4EXtS5zAwM4" } } ] } ], "itinerary": [ { "dayNumber": 1, "date": "2025-09-25", "dayOfWeek": "목", "dayTheme": "나리타 도착 및 게이머의 성지 '아키하바라' 탐방", "dayNote": "오전 비행기로 도착 후, 오후에는 도쿄 게임쇼의 예열 격으로 아키하바라를 둘러보는 일정입니다.", "activities": [ { "timeSlot": { "start": "09:00", "end": "11:30" }, "activityType": "transport", "activityName": "인천에서 도쿄(나리타)로 이동" }, { "timeSlot": { "start": "13:00", "end": "14:00" }, "activityType": "attraction", "activityName": "호텔 체크인 및 짐 보관", "mainLocation": { "name": "APA 호텔 & 리조트 도쿄 베이 마쿠하리", "placeDetails": { "name": "APA 호텔 & 리조트 도쿄 베이 마쿠하리", "address": "2-chōme-3 Hibino, Mihama Ward, Chiba, 261-0021 일본", "rating": 4, "reviewCount": 17690, "photos": [ "https://placehold.co/600x300/e9d5ff/581c87?text=APA+Hotel" ], "mapLink": "https://maps.google.com/?cid=18053748279231973069" } } }, { "timeSlot": { "start": "14:00", "end": "15:30" }, "activityType": "meal", "mealType": "lunch", "activityName": "점심 식사", "options": [ { "name": "카이힌마쿠하리 역 주변 식당가", "recommended": true, "reasonForSelection": "아키하바라로 이동 전, 역 근처에서 간편하게 해결", "tips": [ "라멘, 덮밥 등 빠른 식사가 가능한 곳이 많습니다." ], "placeDetails": { "name": "Midtree Cafe", "address": "일본 〒261-0021 Chiba, Mihama Ward, Hibino, 2-chōme−４ プレナ幕張 2F", "rating": 3.9, "reviewCount": 321, "photos": [ "https://placehold.co/600x300/fecaca/991b1b?text=Midtree+Cafe" ], "mapLink": "https://maps.google.com/?cid=5761559363357931999" } } ] }, { "timeSlot": { "start": "15:30", "end": "19:30" }, "activityType": "attraction", "activityName": "아키하바라 '전기街' 탐방", "options": [ { "name": "요도바시 카메라", "tips": [ "최신 전자제품, 게임, 피규어 등을 한 곳에서 볼 수 있는 대형 매장입니다." ], "placeDetails": { "name": "요도바시 카메라 멀티미디어 Akiba", "address": "1-1 Kanda Hanaokachō, Chiyoda City, Tokyo 101-0028 일본", "rating": 4.2, "reviewCount": 25012, "photos": [ "https://placehold.co/600x300/a5f3fc/0c4a6e?text=Yodobashi+1", "https://placehold.co/600x300/99f6e4/0f766e?text=Yodobashi+2" ], "mapLink": "https://maps.google.com/?cid=8915183078415758198" } }, { "name": "아키하바라 라디오회관", "recommended": true, "tips": [ "피규어, 굿즈 등 서브컬처 상품 전문 매장이 밀집해 있습니다." ], "placeDetails": { "name": "아키하바라 라디오회관", "address": "1-chōme-15-16 Sotokanda, Chiyoda City, Tokyo 101-0021 일본", "rating": 4.2, "reviewCount": 6951, "photos": [ "https://placehold.co/600x300/d8b4fe/581c87?text=Radio+Kaikan" ], "mapLink": "https://maps.google.com/?cid=3516513028144054760" } }, { "name": "슈퍼 포테토", "tips": [ "고전 게임(레트로 게임)의 성지로, 추억의 게임들을 구경하고 구매할 수 있습니다." ], "placeDetails": { "name": "슈퍼 포테이토 아키하바라 점", "address": "일본 〒101-0021 Tokyo, Chiyoda City, Sotokanda, 1-chōme−11−２ 北林ビル ３階～５階", "rating": 4.3, "reviewCount": 3517, "photos": [ "https://placehold.co/600x300/fde68a/854d0e?text=Super+Potato" ], "mapLink": "https://maps.google.com/?cid=7617596130752392823" } } ] }, { "timeSlot": { "start": "19:30", "end": "20:30" }, "activityType": "meal", "mealType": "dinner", "activityName": "저녁 식사 (아키하바라)", "options": [ { "name": "큐슈 장가라 라멘", "recommended": true, "reasonForSelection": "다양한 토핑을 추가할 수 있는 유명 돈코츠 라멘 전문점. 혼밥하기 좋습니다.", "placeDetails": { "name": "큐슈 장가라 라멘 아키하바라점", "address": "일본 〒101-0021 Tokyo, Chiyoda City, Sotokanda, 3-chōme−11−６ 一枝ビル １Ｆ", "rating": 4.4, "reviewCount": 4044, "photos": [ "https://placehold.co/600x300/fdba74/9a3411?text=Ramen" ], "mapLink": "https://maps.google.com/?cid=15803054051893721784" } }, { "name": "규카츠 이치니산", "reasonForSelection": "레어 상태로 나와 개인 화로에 구워 먹는 규카츠 맛집입니다.", "placeDetails": { "name": "규카츠 이치니산", "address": "3-chōme-8-17 Sotokanda, Chiyoda City, Tokyo 101-0021 일본", "rating": 4.8, "reviewCount": 12781, "photos": [ "https://placehold.co/600x300/fca5a5/991b1b?text=Gyukatsu" ], "mapLink": "https://maps.google.com/?cid=4605856578078533612" } } ] } ] }, { "dayNumber": 2, "date": "2025-09-26", "dayOfWeek": "금", "dayTheme": "도쿄 게임쇼(TGS) 집중 공략!", "activities": [ { "timeSlot": { "start": "10:00", "end": "17:00" }, "activityType": "attraction", "activityName": "도쿄 게임쇼 2025 관람" } ] }, { "dayNumber": 3, "date": "2025-09-27", "dayOfWeek": "토", "dayTheme": "TGS 퍼블릭 데이 & 귀국", "activities": [ { "timeSlot": { "start": "10:00", "end": "13:30" }, "activityType": "shopping", "activityName": "TGS 관람 및 굿즈 쇼핑" } ] } ] } };

        document.addEventListener('DOMContentLoaded', () => {
            const navContainer = document.querySelector('#top-nav .flex');
            const pageContainer = document.getElementById('page-container');
            let currentPageIndex = 0;

            function renderApp() {
                const tripInfo = travelData.tripPlan.tripInfo;
                document.getElementById('main-title').textContent = `🎮 ${tripInfo.tripTitle}`;
                document.getElementById('main-subtitle').textContent = `${tripInfo.startDate} ~ ${tripInfo.endDate} (${tripInfo.totalDays}일)`;
                
                pageContainer.innerHTML = '';
                navContainer.innerHTML = '';

                // 장소 상세 정보 HTML 생성 헬퍼 함수
                const createDetailsHtml = (item) => {
                    if (!item) return '<p class="text-sm text-slate-500">세부 정보가 없습니다.</p>';

                    if (!item.placeDetails) {
                        const description = item.description || item.reasonForSelection || '자세한 설명이 없습니다.';
                        const tipsHtml = item.tips && item.tips.length > 0 ? `<div class="mt-4 border-t border-slate-100 pt-3"><h4 class="text-xs font-bold text-slate-500 mb-2">💡 전문가 팁</h4><ul class="list-disc list-inside text-xs text-slate-500 space-y-1">${item.tips.map(tip => `<li>${tip}</li>`).join('')}</ul></div>` : '';
                        return `<div class="p-1">${description}</div>${tipsHtml}`;
                    }
                    
                    const details = item.placeDetails;
                    const imagesHtml = details.photos && details.photos.length > 0 ? `
                        <div class="relative -mx-5 mb-4 rounded-lg overflow-hidden image-slider-container">
                            <div class="flex overflow-x-auto snap-x snap-mandatory no-scrollbar image-list">
                                ${details.photos.map(src => `<div class="snap-center flex-shrink-0 w-full"><img src="${src}" class="w-full h-52 object-cover" alt="${details.name}" onerror="this.onerror=null;this.src='https://placehold.co/600x300/cbd5e1/475569?text=Image+Error';"></div>`).join('')}
                            </div>
                            <div class="absolute bottom-3 left-0 right-0 flex justify-center gap-2 slider-dots"></div>
                            <button class="slider-arrow absolute top-1/2 left-2 -translate-y-1/2 bg-black/30 text-white w-8 h-8 rounded-full flex items-center justify-center prev-btn">&lt;</button>
                            <button class="slider-arrow absolute top-1/2 right-2 -translate-y-1/2 bg-black/30 text-white w-8 h-8 rounded-full flex items-center justify-center next-btn">&gt;</button>
                        </div>` : '';
                    const ratingHtml = details.rating ? `
                        <div class="flex items-center gap-2">
                            <span class="font-bold text-amber-500">${details.rating}</span>
                            <div class="flex text-amber-400">${'★'.repeat(Math.round(details.rating))}${'☆'.repeat(5 - Math.round(details.rating))}</div>
                            <span class="text-xs text-slate-400">(${details.reviewCount.toLocaleString()} reviews)</span>
                        </div>` : '';
                    const tipsHtml = item.tips && item.tips.length > 0 ? `<div class="mt-4 border-t border-slate-100 pt-3"><h4 class="text-xs font-bold text-slate-500 mb-2">💡 전문가 팁</h4><ul class="list-disc list-inside text-xs text-slate-500 space-y-1">${item.tips.map(tip => `<li>${tip}</li>`).join('')}</ul></div>` : '';

                    return `
                        ${imagesHtml}
                        <div class="space-y-3 pt-2">
                            ${ratingHtml}
                            <div class="flex items-start gap-2 text-sm text-slate-600">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0 mt-0.5"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                                <span>${details.address || '주소 정보 없음'}</span>
                            </div>
                            ${ item.reasonForSelection ? `<p class="text-sm font-medium text-orange-700 bg-orange-50 p-3 rounded-lg mt-2">${item.reasonForSelection}</p>` : ''}
                            <div class="mt-4 flex gap-3">
                                <a href="${details.mapLink}" target="_blank" class="flex-1 text-center bg-orange-50 text-orange-700 text-sm font-bold py-2 px-4 rounded-lg hover:bg-orange-100 transition">지도 보기</a>
                            </div>
                            ${tipsHtml}
                        </div>`;
                };

                // 각 날짜별로 페이지 생성
                travelData.tripPlan.itinerary.forEach((dayPlan, dayIndex) => {
                    const activityIcons = { transport: { icon: `✈️`, color: 'bg-blue-100' }, attraction: { icon: `🏰`, color: 'bg-purple-100' }, meal: { icon: `🍜`, color: 'bg-amber-100' }, shopping: { icon: `🛍️`, color: 'bg-pink-100' }, rest: { icon: `😴`, color: 'bg-teal-100' } };

                    // 각 활동별 카드 생성
                    let activitiesHtml = dayPlan.activities.map((act, actIndex) => {
                        const iconInfo = activityIcons[act.activityType] || { icon: '➡️', color: 'bg-slate-100' };
                        
                        // 옵션이 있는 경우 (확장형 카드)
                        if (act.options && act.options.length > 1) {
                            let recommendedIndex = act.options.findIndex(opt => opt.recommended);
                            if (recommendedIndex === -1) recommendedIndex = 0;

                            const initialContentHtml = createDetailsHtml(act.options[recommendedIndex]);

                            const compactOptionsHtml = act.options.map((option, index) => {
                                const rating = option.placeDetails?.rating;
                                const ratingHtml = rating ? `<div class="flex items-center gap-1.5"><span class="font-bold text-amber-500 text-sm">${rating}</span><div class="flex text-amber-400">${'★'.repeat(Math.round(rating))}</div></div>` : '';
                                return `
                                <div class="option-item p-4 border rounded-lg cursor-pointer ${index === recommendedIndex ? 'selected' : ''}" data-index="${index}">
                                    <div class="flex justify-between items-start">
                                        <h4 class="font-bold text-slate-800 pr-4">${option.recommended ? '⭐ ' : ''}${option.name}</h4>
                                        ${ratingHtml}
                                    </div>
                                    <p class="text-xs text-slate-500 mt-1">${option.tips?.[0] || option.reasonForSelection || ''}</p>
                                </div>
                                `
                            }).join('');

                            return `
                                <div class="relative pl-12 activity-card" data-day-index="${dayIndex}" data-activity-index="${actIndex}">
                                    <div class="absolute left-0 top-1.5 flex items-center"><div class="w-8 h-8 ${iconInfo.color} rounded-full flex items-center justify-center ring-4 ring-white">${iconInfo.icon}</div></div>
                                    <div class="bg-white p-5 rounded-xl border border-slate-100 shadow-sm">
                                        <p class="text-sm font-semibold text-gray-500 mb-1">${act.timeSlot.start} - ${act.timeSlot.end}</p>
                                        <h3 class="text-lg font-bold mb-3">${act.activityName}</h3>
                                        
                                        <!-- 현재 선택된 옵션의 상세 정보 -->
                                        <div class="option-details-container">
                                            ${initialContentHtml}
                                        </div>

                                        <!-- 다른 옵션 보기 버튼 -->
                                        <div class="mt-4 pt-4 border-t border-slate-100">
                                            <button class="toggle-options-btn text-sm font-bold text-orange-600 hover:text-orange-700 w-full text-left flex items-center justify-between">
                                                <span>다른 추천 보기 (${act.options.length - 1}개)</span>
                                                <svg class="w-4 h-4 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                                            </button>
                                        </div>

                                        <!-- 확장될 다른 옵션 목록 -->
                                        <div class="expandable-options mt-3">
                                            <div class="space-y-3">
                                                ${compactOptionsHtml}
                                            </div>
                                        </div>
                                    </div>
                                </div>`;
                        } else {
                            // 옵션이 없거나 1개인 경우 (기본 카드)
                             const singleOption = (act.options && act.options.length === 1) ? act.options[0] : (act.mainLocation || act);
                            return `
                                <div class="relative pl-12">
                                    <div class="absolute left-0 top-1.5 flex items-center"><div class="w-8 h-8 ${iconInfo.color} rounded-full flex items-center justify-center ring-4 ring-white">${iconInfo.icon}</div></div>
                                    <div class="bg-white p-5 rounded-xl border border-slate-100 shadow-sm">
                                        <p class="text-sm font-semibold text-gray-500 mb-1">${act.timeSlot.start} - ${act.timeSlot.end}</p>
                                        <h3 class="text-lg font-bold mb-3">${act.activityName}</h3>
                                        ${createDetailsHtml(singleOption)}
                                    </div>
                                </div>`;
                        }
                    }).join('');
                    
                    const pageDiv = document.createElement('div');
                    pageDiv.className = 'page-content h-full overflow-y-auto p-6';
                    pageDiv.innerHTML = `<div class="mb-8"><h2 class="text-3xl font-extrabold gradient-text">DAY ${dayPlan.dayNumber}</h2><p class="text-slate-500 font-medium">${dayPlan.dayTheme}</p></div><div class="relative"><div class="absolute left-4 top-2 bottom-2 w-0.5 bg-slate-200"></div><div class="space-y-8">${activitiesHtml}</div></div>`;
                    pageContainer.appendChild(pageDiv);

                    const navTab = document.createElement('button');
                    navTab.className = 'nav-tab py-4 px-2 text-sm font-medium text-slate-500 border-b-2 border-transparent whitespace-nowrap';
                    navTab.textContent = `DAY ${dayPlan.dayNumber}`;
                    navTab.dataset.index = dayIndex;
                    navContainer.appendChild(navTab);
                });
                
                // 이벤트 위임을 사용하여 클릭 핸들러 설정
                pageContainer.addEventListener('click', (e) => {
                    // '다른 옵션 보기' 버튼 클릭 시
                    const toggleBtn = e.target.closest('.toggle-options-btn');
                    if (toggleBtn) {
                        const expandableArea = toggleBtn.parentElement.nextElementSibling;
                        const icon = toggleBtn.querySelector('svg');
                        expandableArea.classList.toggle('expanded');
                        icon.classList.toggle('rotate-180');
                    }

                    // 옵션 아이템 클릭 시
                    const optionItem = e.target.closest('.option-item');
                    if (optionItem) {
                        const card = optionItem.closest('.activity-card');
                        const dayIndex = card.dataset.dayIndex;
                        const activityIndex = card.dataset.activityIndex;
                        const optionIndex = optionItem.dataset.index;

                        // 선택된 아이템 활성화
                        card.querySelectorAll('.option-item').forEach(c => c.classList.remove('selected'));
                        optionItem.classList.add('selected');

                        // 상세 정보 업데이트
                        const selectedOptionData = travelData.tripPlan.itinerary[dayIndex].activities[activityIndex].options[optionIndex];
                        const detailsContainer = card.querySelector('.option-details-container');
                        detailsContainer.innerHTML = createDetailsHtml(selectedOptionData);
                        
                        // 이미지 슬라이더 재초기화
                        initializeSliders();
                    }
                });
            }

            // 페이지 전환 로직
            const switchPage = (index) => {
                const navTabs = navContainer.querySelectorAll('.nav-tab');
                currentPageIndex = index;
                pageContainer.style.transform = `translateX(-${index * 100}%)`;
                navTabs.forEach((tab, i) => tab.classList.toggle('active', i === index));
                const activeTab = navTabs[index];
                if (activeTab) {
                    activeTab.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
                }
                initializeSliders();
            };
            navContainer.addEventListener('click', (e) => { if (e.target.classList.contains('nav-tab')) { switchPage(parseInt(e.target.dataset.index)); } });
            
            // 터치 스와이프 로직
            let touchStartX = 0;
            pageContainer.addEventListener('touchstart', (e) => { touchStartX = e.changedTouches[0].screenX; }, { passive: true });
            pageContainer.addEventListener('touchend', (e) => {
                const touchEndX = e.changedTouches[0].screenX;
                const navTabs = navContainer.querySelectorAll('.nav-tab');
                if (touchEndX < touchStartX - 50 && currentPageIndex < navTabs.length - 1) { switchPage(currentPageIndex + 1); }
                if (touchEndX > touchStartX + 50 && currentPageIndex > 0) { switchPage(currentPageIndex - 1); }
            });

            // 이미지 슬라이더 초기화 로직
            const initializeSliders = () => {
                document.querySelectorAll('.image-slider-container').forEach(sliderContainer => {
                    const imageList = sliderContainer.querySelector('.image-list');
                    const prevBtn = sliderContainer.querySelector('.prev-btn');
                    const nextBtn = sliderContainer.querySelector('.next-btn');
                    const dotsContainer = sliderContainer.querySelector('.slider-dots');
                    const images = imageList.querySelectorAll('div.snap-center');
                    
                    if (!imageList || !prevBtn || !nextBtn || !dotsContainer) return;
                    if (images.length <= 1) {
                        dotsContainer.style.display = 'none';
                        prevBtn.style.display = 'none';
                        nextBtn.style.display = 'none';
                        return;
                    }
                    
                    dotsContainer.style.display = 'flex';
                    prevBtn.style.display = 'flex';
                    nextBtn.style.display = 'flex';

                    let currentIndex = 0;
                    dotsContainer.innerHTML = '';
                    images.forEach((_, i) => { const dot = document.createElement('button'); dot.classList.add('w-2', 'h-2', 'rounded-full', 'transition', 'bg-white/50'); if (i === 0) dot.classList.add('bg-white'); dotsContainer.appendChild(dot); });
                    const dots = dotsContainer.querySelectorAll('button');
                    
                    const updateSlider = (smooth = true) => { 
                        imageList.scrollTo({ left: imageList.offsetWidth * currentIndex, behavior: smooth ? 'smooth' : 'auto' }); 
                        dots.forEach((dot, i) => {
                            dot.classList.toggle('bg-white', i === currentIndex);
                            dot.classList.toggle('bg-white/50', i !== currentIndex);
                        }); 
                    };

                    prevBtn.onclick = () => { currentIndex = (currentIndex > 0) ? currentIndex - 1 : images.length - 1; updateSlider(); };
                    nextBtn.onclick = () => { currentIndex = (currentIndex < images.length - 1) ? currentIndex + 1 : 0; updateSlider(); };
                    
                    let scrollTimeout;
                    imageList.onscroll = () => {
                        clearTimeout(scrollTimeout);
                        scrollTimeout = setTimeout(() => {
                            const newIndex = Math.round(imageList.scrollLeft / imageList.offsetWidth); 
                            if(newIndex !== currentIndex) { 
                                currentIndex = newIndex; 
                                updateSlider(false); 
                            }
                        }, 150);
                    };
                    updateSlider(false);
                });
            };
            
            renderApp();
            switchPage(0);
        });
    </script>
</body>
</html>